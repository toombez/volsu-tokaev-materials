# Управление потоком Rust

## Кортежи

**Кортеж** - это набор значений разных типов.

Кортежи строятся с помощью круглых скобок ```()```, а каждый кортеж сам по себе является значением с сигнатурой типа ```(T1, T2, ...)```, где ```T1```, ```T2``` - типы его членов. Функции могут использовать кортежи для возврата нескольких значений, так как кортежи могут содержать любое количество значений.

```rs
let long_tuple = (
    1u8   , 2u16  , 3u32 , 4u64 ,
    -1i8  , -2i16 , -3i32, -4i64,
    0.1f32, 0.2f64, 'a'  , true ,
);
```

[Запуск в песочнице](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=37eb03177cfbcfa8dc9e56b435685639)

## Массивы

**Массив** - это коллекция объектов одного типа ```T```, хранящихся в непрерывной памяти. Массивы создаются с помощью скобок ```[]```, а их длина, которая известна во время компиляции, является частью сигнатуры типа ```[T; length]```.

```rs
let xs: [i32; 5] = [1, 2, 3, 4, 5];
let ys: [i32; 500] = [0; 500];
```

[Запуск в песочнице](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=21e5498ad8e940034a2c4e3ca8a46dff)

## Statement/Expression

**Statement** - это инструкции, которые выполняют некоторое действие и не возвращают значение.

**Expression** вычисляются до результирующего значения.

```rs Statement
fn main() {
    let y = 6 + 1;

    println!("{}", y); // Переменная y хранит значение 7_i32
}
```

[Запуск в песочнице](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=be6e22c3847ac8367baf64a88980905f)

```rs Expression
fn main() {
    let y = {
        let x = 6;

        println!("{}", x); // Переменная x храниет значени 6_i32

        x + 1
    };

    // println!("{}", x); - ошибка

    // Переменная x больше не доступна

    println!("{}", y); // Переменная y хранит значение 7_i32
}
```

[Запуск в песочнице](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=c2c464401c3d3468ac974a56cb909d11)

::: info Объяснение разницы **Statement** и **Expression**
В обоих случаях значения ```y``` равны, однако в варианте **Expression** создается и инициализируется дополнительная область видимости со своей переменной ```x```, к которой добавляется значение ```1```. После завершения выполнения блока кода переменная ```x``` становится недоступной.
:::

### Возврат значения из функций

В качестве возвращаемого значения будет использоваться конечное выражение в функции. Кроме того, оператор ```return``` можно использовать для возврата значения функции, полученного ранее внутри функции, даже внутри циклов или операторов ```if```.

```rs
fn main() {
    let r1 = add(1, 2);
    let r2 = add_explicitly(1, 2);

    println!("{r1}"); // 3
    println!("{r2}"); // 3
}

fn add(a: u32, b: u32) -> u32 {
    a + b
}

fn add_explicitly(a: u32, b: u32) -> u32 {
    return a + b;
}
```

[Запуск в песочнице](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=85c6295cc5f405d27f5fd18341a7890a)

## Условная конструкция

Ветвление с помощью ```if-else``` похоже на аналоги в других языка программирования. В отличие от многих из них, логическое условие не должно быть заключено в круглые скобки, а после каждого условия должен следовать выполняемый блок. Условные операторы ```if-else``` являются **expression**, и все ветки должны возвращать значения одного и того же типа.

```rs
fn main() {
    let n = 5;

    if n < 0 {
        print!("{} - отрицательное", n);
    } else if n > 0 {
        print!("{} - положительное", n);
    } else {
        print!("{} - нуль", n);
    }
}
```

[Запуск в песочнице](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=fde0750bf127371661dd26edd3f25792)

## Циклические контрукции

### ```while```

Ключевое слово ```while``` может использоваться для запуска цикла, пока условие истинно.

```rs
fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{number}!");

        number -= 1;
    }

    println!("END");
}
```

[Запуск в песочнице](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=57b213dbfef66160fa9b129d9ec4f596)

### ```for```

Конструкция ```for in``` может быть использована для итерации по итератору. Один из самых простых способов создания итератора - использовать обозначение диапазона ```a..b```. Это позволяет получить значения от ```a``` (включительно) до ```b``` (исключительно) с шагом в единицу.

```rs
// Итерирование по массиву
fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a {
        println!("значение element: {element}");
    }
}
```

```rs
// Итерирование по диапазону
fn main() {
    for element in 0..10 {
        println!("значение element: {element}");
    }
}
```

[Запуск в песочнице](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=939a143a2c6860e8563cff365098723b)

::: info Включающие диапазоны
В качестве альтернативы можно использовать ```a..=b``` для диапазона, который включает в себя оба конца.
:::

## Задания для выполнения

### Задание 1

Необходимо написать программу, которая генерирует 20 чисел Фибоначчи

::: warning Примечание
[Числа Фибоначчи](https://en.wikipedia.org/wiki/Fibonacci_sequence) - числовой ряд, при котором каждое последующее число равно сумме двух предыдущих
:::

#### Пример

```sh
Числа Фибоначчи:
0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181
```

::: info Вывод без переноса на новую строчку
Для вывода без переноса на новую строчку испольуйте макрос [```print!()```](/system-programming/practice-1.html#%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B2-%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB).
:::

### Задание 2

Необходимо написать программу, которая будет рассчитывать значение факториала для выражения:

$$(N + 20) \bmod 8,$$

где $N$ - номер по списку группы.

::: warning Примечание
[Факториал](https://en.wikipedia.org/wiki/Factorial) числа $n$ - это произведение всех натуральных чисел от единицы до $n$. Обозначается факториал символом восклицательного знака: $!$.

$\bmod$ - операция нахождения остатка от деления.
:::

#### Пример

Для студента, который идет 15-м по списку группы, будет выведено следующее:

```sh
3! = 6
```

### Задание 3

Необходимо написать программу, в которой инициализируется массив размера $N + 20$. Массив последовательно заполняется целыми числами от $N$ до $N + 20$ с шагом $1$.

Для каждого элемента созданного массива рассчитать значения по следующей формуле:

$$\left( x ^ 2 \bmod \frac{N}{2}\right) * (5 + x)$$

::: warning Примечание
- $N$ - номер по списку группы;
- $x$ - число из массива;
- $\bmod$ - операция нахождения остатка от деления.
:::

#### Пример

Для студента, который идет 5-м по списку группы, будет выведено следующее:

```sh
10, 0, 12, 0, 14, 0, 16, 0, 18, 0, 20, 0, 22, 0, 24, 0, 26, 0, 28, 0, 30, 0, 32, 0, 34
```

::: info Массив, полученный в результате инициализации
```rs
[5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29]
```
:::

### Задание 4

Необходимо написать программу, в которой инициализируется массив размера 10. Массив заполняется последовательно целыми числами от $N ^ 2$ до $N ^ 2 + 10$ с шагом $1$.

Для каждого элемента созданного массива определить делимость на $N$

::: warning Примечание
$N$ - номер по списку группы
:::

#### Пример

Для студента, который идет 5-м по списку группы, будет выведено следующее:

```sh
Число 25: true
Число 26: false
Число 27: false
Число 28: false
Число 29: false
Число 30: true
Число 31: false
Число 32: false
Число 33: false
Число 34: false
```

::: info Массив, полученный в результате инициализации

```rs
[25, 26, 27, 28, 29, 30, 31, 32, 33, 34]
```
:::

### Задание 5

Необходимо написать программу, в которой инициализируются два массива ```a``` и ```b``` размера 10. Массивы заполняются по следующим правилам:

- Массив ```a```: целые числа от $N - 100$ до $N - 90$ с шагом $1$;
- Массив ```b```: целые числа от $N$ до $N + 10$ с шагом $1$.

Для каждых чисел под индексом $i$ вычислите следующее выражение:

$$
\left(\frac{a_i}{2} + \frac{b_i}{2}\right) * N,
$$

где $a_i$ - $i$-й элемент массива $a$, $b_i$ - $i$-й элемент массива $b$.

::: warning Примечание
$N$ - номер по списку группы
:::

#### Пример

Для студента, который идет 5-м по списку группы, будет выведено следующее:

```sh
Для чисел -95 и 5: -225
Для чисел -94 и 6: -220
Для чисел -93 и 7: -215
Для чисел -92 и 8: -210
Для чисел -91 и 9: -205
Для чисел -90 и 10: -200
Для чисел -89 и 11: -195
Для чисел -88 и 12: -190
Для чисел -87 и 13: -185
Для чисел -86 и 14: -180
```

::: info Массивы, полученный в результате инициализации
```sh
a: [-95, -94, -93, -92, -91, -90, -89, -88, -87, -86]
b: [5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
```
:::

### Задание 6

Необходимо написать программу, в которой инициализируется массив ```a``` размером 200. Сначала массив заполняется целыми числами от $N$ с шагом $3$, после чего преобразуется по следующему правилу: $a_i = a_i \bmod 50$.

Необходимо найти количество вхождений чисела $N$ в полученном массиве.

::: warning Примечание
- $N$ - номер по списку группы;
- $a_i$ - число из массива под индексом $i$;
- $\bmod$ - операция нахождения остатка от деления.
:::

#### Пример

Для студента, который 10 в списке, будет выведено следующее:

```sh
Количество чисел "10": 4
```

::: info Массив, полученный в результате инициализации

```rs
[
10, 41, 22, 3, 34, 15, 46, 27, 8, 39, 20, 1, 32, 13, 44, 25, 6, 37, 18, 49, 30,
11, 42, 23, 4, 35, 16, 47, 28, 9, 40, 21, 2, 33, 14, 45, 26, 7, 38, 19, 0, 31,
12, 43, 24, 5, 36, 17, 48, 29, 10, 41, 22, 3, 34, 15, 46, 27, 8, 39, 20, 1, 32,
13, 44, 25, 6, 37, 18, 49, 30, 11, 42, 23, 4, 35, 16, 47, 28, 9, 40, 21, 2, 33,
14, 45, 26, 7, 38, 19, 0, 31, 12, 43, 24, 5, 36, 17, 48, 29, 10, 41, 22, 3, 34,
15, 46, 27, 8, 39, 20, 1, 32, 13, 44, 25, 6, 37, 18, 49, 30, 11, 42, 23, 4, 35,
16, 47, 28, 9, 40, 21, 2, 33, 14, 45, 26, 7, 38, 19, 0, 31, 12, 43, 24, 5, 36,
17, 48, 29, 10, 41, 22, 3, 34, 15, 46, 27, 8, 39, 20, 1, 32, 13, 44, 25, 6, 37,
18, 49, 30, 11, 42, 23, 4, 35, 16, 47, 28, 9, 40, 21, 2, 33, 14, 45, 26, 7, 38,
19, 0, 31, 12, 43, 24, 5, 36, 17, 48, 29
]
```
:::
